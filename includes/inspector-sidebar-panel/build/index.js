(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var s in t)e.o(t,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:t[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.i18n,t=window.wp.element,s=window.wp.plugins,i=window.wp.data,a=window.wp.editor,c=window.wp.components,n=window.wp.apiFetch;var l=e.n(n);const d=window.ReactJSXRuntime;function p({post:e}){return(0,d.jsx)("div",{className:"referencing-post-item",children:(0,d.jsx)("div",{className:"post-header",children:(0,d.jsxs)("div",{className:"post-content",children:[(0,d.jsxs)("h4",{className:"post-title",children:[(0,d.jsx)(c.ExternalLink,{href:e.edit_url,children:e.title||(0,r.__)("(No title)","prc-chart-builder")}),(e=>{const t={publish:(0,r.__)("Published","prc-chart-builder"),draft:(0,r.__)("Draft","prc-chart-builder"),private:(0,r.__)("Private","prc-chart-builder"),pending:(0,r.__)("Pending","prc-chart-builder"),future:(0,r.__)("Scheduled","prc-chart-builder")}[e]||e;return(0,d.jsx)("span",{className:`status-badge status-${e}`,children:t})})(e.status)]}),(0,d.jsxs)("p",{className:"post-meta",children:[(t=e.type,{post:(0,r.__)("Post","prc-chart-builder"),page:(0,r.__)("Page","prc-chart-builder"),"short-read":(0,r.__)("Short Read","prc-chart-builder"),"fact-sheet":(0,r.__)("Fact Sheet","prc-chart-builder"),feature:(0,r.__)("Feature","prc-chart-builder"),quiz:(0,r.__)("Quiz","prc-chart-builder")}[t]||t)," â€¢ ID: ",e.id]}),"publish"===e.status&&(0,d.jsx)("p",{className:"post-view-link",children:(0,d.jsx)(c.ExternalLink,{href:e.permalink,children:(0,r.__)("View Post","prc-chart-builder")})})]})})});var t}(0,s.registerPlugin)("prc-chart-builder-inspector-panel",{render:function(){const[e,s]=(0,t.useState)([]),[n,h]=(0,t.useState)(!1),[o,u]=(0,t.useState)(null),{postId:_,postType:b}=(0,i.useSelect)(e=>({postId:e(a.store).getCurrentPostId(),postType:e(a.store).getCurrentPostType()}),[]);return"chart"!==b?null:((0,t.useEffect)(()=>{_&&(h(!0),u(null),l()({path:`prc-chart-builder/v1/chart/${_}/referencing-posts`}).then(e=>{s(e),h(!1)}).catch(e=>{u(e.message||(0,r.__)("Failed to load referencing posts","prc-chart-builder")),h(!1)}))},[_]),(0,d.jsxs)(a.PluginDocumentSettingPanel,{name:"prc-chart-builder-referencing-posts",title:(0,r.__)("Posts Using This Chart","prc-chart-builder"),className:"prc-chart-builder-inspector-panel",children:[n&&(0,d.jsxs)("div",{className:"loading-container",children:[(0,d.jsx)(c.Spinner,{}),(0,d.jsx)("span",{className:"loading-text",children:(0,r.__)("Loading referencing posts...","prc-chart-builder")})]}),o&&(0,d.jsx)(c.Notice,{status:"error",isDismissible:!1,children:o}),!n&&!o&&0===e.length&&(0,d.jsx)("p",{className:"empty-state",children:(0,r.__)("This chart is not currently used in any posts.","prc-chart-builder")}),!n&&!o&&e.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"posts-list-header",children:1===e.length?(0,r.__)("This chart is used in 1 post:","prc-chart-builder"):`${(0,r.__)("This chart is used in","prc-chart-builder")} ${e.length} ${(0,r.__)("posts:","prc-chart-builder")}`}),e.map(e=>(0,d.jsx)(p,{post:e},e.id))]})]}))}})})();
//# sourceMappingURL=index.js.map