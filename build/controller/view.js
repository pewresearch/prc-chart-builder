import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(i={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},s={},e.d(s,i),s),{addQueryArgs:r}=window.wp.url,{innerWidth:n,innerHeight:a}=window;var i,s;const{state:l}=(0,o.store)("prc-block/chart-builder-controller",{state:{get isActive(){const t=(0,o.getContext)(),{id:e}=t,r=(0,o.getElement)();return r.attributes["data-chart-view"]===l[e].activeTab||r.attributes["data-allow-overlay"]&&"share"===l[e].activeTab}},actions:{setActiveTab(){const t=(0,o.getContext)(),{id:e}=t,r=(0,o.getElement)();l[e].activeTab=r.attributes["data-chart-view"]},hideModal(){const t=(0,o.getContext)(),{id:e}=t;l[e].activeTab="chart"},shareTwitter(){const t=(0,o.getContext)(),{postId:e,postUrl:i,rootUrl:s,title:l,featuredImageId:c}=t,d=r("https://twitter.com/intent/tweet",{text:l,url:c?`${s}/share/${e}/${c}`:i});window.open(d,"twtrShareWindow",`height=450, width=550, top=${a/2-275}, left=${n/2-225}, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0`)},shareFacebook(){const t=(0,o.getContext)(),{postId:e,postUrl:i,rootUrl:s,featuredImageId:l}=t,c=r("https://www.facebook.com/sharer/sharer.php",{u:l?`${s}/share/${e}/${l}`:i});window.open(c,"fbShareWindow",`height=450, width=550, top=${a/2-275}, left=${n/2-225}, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0`)},downloadData(t){const e=(0,o.getContext)(),{tableData:r,title:n,subtitle:a,note:i,source:s,tag:l,postPubDate:c}=e;if("keydown"===t.type&&("Enter"!==t.key||" "!==t.key))return;if(!r)return;const d=function(t,e){if(void 0===t||0===t.length)return!1;const o=t,r=t=>void 0!==t?t:"";let n="";void 0!==e&&(n+=`${r(e.title)}\n\t\t\t${r(e.subtitle)}\n\n\t\t\t`);for(let t=0;t<o.length;t+=1){let e="";for(let r=0;r<o[t].length;r+=1)r>0&&(e+=","),o[t][r].indexOf(",")>-1?e+=`"${o[t][r]}"`:e+=o[t][r];n+=`${e}\n\t\t`}return void 0!==e&&(n+=`\n\t\t${r(e.note)}\n\t\t${r(e.source)}\n\t\t${r(e.tag)}`),n}([r.header,...r.rows],{title:n,subtitle:a,note:i,source:s,tag:l}),w=new Blob([d],{type:"text/csv"}),b=URL.createObjectURL(w),h=document.createElement("a"),u=n.toLowerCase().replace(/\s+/g,"_");h.setAttribute("href",b),h.setAttribute("download",`${u}_data_${c}.csv`),h.click()},downloadSVG(){const t=(0,o.getContext)(),{id:e}=t,r=document.getElementById(e).querySelector("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const n=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`chart-${e}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},callbacks:{}});
//# sourceMappingURL=view.js.map