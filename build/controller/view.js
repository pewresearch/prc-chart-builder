import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(i={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},s={},e.d(s,i),s),{addQueryArgs:r}=window.wp.url,{innerWidth:a,innerHeight:n}=window;var i,s;const{state:l,actions:d}=(0,o.store)("prc-block/chart-builder-controller",{state:{get isActive(){const t=(0,o.getContext)(),{id:e}=t,r=(0,o.getElement)();return r.attributes["data-chart-view"]===l[e].activeTab||r.attributes["data-allow-overlay"]&&"share"===l[e].activeTab}},callbacks:{detectWebShareSupport(){void 0===window.navigator.share?l.webShareSupported=!1:l.webShareSupported=!0}},actions:{setActiveTab(t){t.preventDefault();const e=(0,o.getContext)(),{id:r}=e,a=(0,o.getElement)();"share"===a.attributes["data-chart-view"]&&l.webShareSupported?d.shareNative():l[r].activeTab=a.attributes["data-chart-view"]},hideModal(){const t=(0,o.getContext)(),{id:e}=t;l[e].activeTab="chart"},shareNative:()=>{const t=(0,o.getContext)(),{postId:e,postUrl:r,rootUrl:a,title:n,featuredImageId:i}=t,s=i?`${a}/share/${e}/${i}`:r;!0===l.webShareSupported&&window.navigator.share({title:n+" | Pew Research Center",url:s})},shareTwitter(){const t=(0,o.getContext)(),{postId:e,postUrl:i,rootUrl:s,title:l,featuredImageId:d}=t,c=r("https://twitter.com/intent/tweet",{text:l,url:d?`${s}/share/${e}/${d}`:i});window.open(c,"twtrShareWindow",`height=450, width=550, top=${n/2-275}, left=${a/2-225}, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0`)},shareBluesky(){const t=(0,o.getContext)(),{postId:e,postUrl:i,rootUrl:s,title:l,featuredImageId:d}=t,c=r("https://bsky.app/intent/compose",{text:`${l} ${d?`${s}/share/${e}/${d}`:i}`});window.open(c,"bskyShareWindow",`height=450, width=550, top=${n/2-275}, left=${a/2-225}, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0`)},shareFacebook(){const t=(0,o.getContext)(),{postId:e,postUrl:i,rootUrl:s,featuredImageId:l}=t,d=r("https://www.facebook.com/sharer/sharer.php",{u:l?`${s}/share/${e}/${l}`:i});window.open(d,"fbShareWindow",`height=450, width=550, top=${n/2-275}, left=${a/2-225}, toolbar=0, location=0, menubar=0, directories=0, scrollbars=0`)},downloadData(t){const e=(0,o.getContext)(),{tableData:r,title:a,subtitle:n,note:i,source:s,tag:l,postPubDate:d}=e;if("keydown"===t.type&&("Enter"!==t.key||" "!==t.key))return;if(!r)return;const c=function(t,e){if(void 0===t||0===t.length)return!1;const o=t,r=t=>void 0!==t?t:"";let a="";void 0!==e&&(a+=`${r(e.title)}\n\t\t\t${r(e.subtitle)}\n\n\t\t\t`);for(let t=0;t<o.length;t+=1){let e="";for(let r=0;r<o[t].length;r+=1)r>0&&(e+=","),o[t][r].indexOf(",")>-1?e+=`"${o[t][r]}"`:e+=o[t][r];a+=`${e}\n\t\t`}return void 0!==e&&(a+=`\n\t\t${r(e.note)}\n\t\t${r(e.source)}\n\t\t${r(e.tag)}`),a}([r.header,...r.rows],{title:a,subtitle:n,note:i,source:s,tag:l}),h=new Blob([c],{type:"text/csv"}),w=URL.createObjectURL(h),p=document.createElement("a"),b=a.toLowerCase().replace(/\s+/g,"_");p.setAttribute("href",w),p.setAttribute("download",`${b}_data_${d}.csv`),p.click()},downloadSVG(){const t=(0,o.getContext)(),{id:e}=t,r=document.getElementById(e).querySelector("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const a=new Blob([r.outerHTML],{type:"image/svg+xml"}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`chart-${e}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}});
//# sourceMappingURL=view.js.map